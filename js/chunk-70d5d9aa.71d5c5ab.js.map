{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/views/cart/CartOrder.vue","webpack:///./src/views/cart/CartOrder.vue?376a"],"names":["DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","this","match","error","class","src","alt","width","order","products","item","key","product","imageUrl","title","category","qty","$filters","currency","total","user","name","address","email","payment_method","type","payment","loadingStatus","loadingItem","data","methods","showAlert","res","$swal","message","getOrder","id","$route","params","url","$http","then","catch","console","log","post","success","$router","push","mounted","clear","render"],"mappings":"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","file":"js/chunk-70d5d9aa.71d5c5ab.js","sourcesContent":["var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","<template>\r\n  <h2 class=\"text-center pt-4\">完成下訂</h2>\r\n  <figure class=\"my-5 text-center mx-auto\">\r\n    <img\r\n      class=\"img-fluid\"\r\n      src=\"https://storage.googleapis.com/vue-course-api.appspot.com/leolee/1626638315773.png?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=NAzscr3NADSvZ5T%2FO1PKZsVwLaMgiErpdNX2PjCqeKouBzWLfyZvcvGPgqyAE%2FP2Kh0TVGbHsgb9oIY6mWd9qk8hB09lQrfHozajWcUm6JZqz%2F0GrOlyR7sR2YTLPj6v2X9A660jp3Xs2qVkfMEGBHSYWUpG2BUzc9%2BE2BiagVh7iV3xrZeZOtmSHQJLjJLZDDQoD7JdFOXQH4Gp3WQjIoOIQ0fkWF1oSo1MVLlCuubgLpTDdGXf3CYTHgnWaJkXKyKgh%2F2Kjd6wa9q7gabCxHQBud6hQ31yf5V%2BYXDrF2xNLAbcM6BwSPHJi8lt%2F0p19uXvyIOhdDU4M6bKw3d59g%3D%3D\"\r\n      alt=\"step4 完成下訂\"\r\n    />\r\n  </figure>\r\n\r\n  <h2 class=\"text-center\">購買品項</h2>\r\n  <table class=\"p-table table align-middle w-md-50 mx-auto\">\r\n    <thead class=\"p-table__foot\">\r\n      <tr class=\"text-light\">\r\n        <th width=\"40%\" class=\"text-center fs-7 fs-sm-6\">商品</th>\r\n        <th class=\"p-table__th--num text-center fs-7 fs-sm-6\">數量</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody class=\"p-table__body\">\r\n      <tr v-for=\"item in order.products\" :key=\"item\">\r\n        <td>\r\n          <figure class=\"d-sm-flex align-items-center\">\r\n            <img\r\n              class=\"product-img\"\r\n              :src=\"item.product.imageUrl\"\r\n              :alt=\"item.product.title\"\r\n            />\r\n            <figcaption class=\"ps-2\">\r\n              <span class=\"badge bg-primary\">{{ item.product.category }}</span>\r\n              <p class=\"fs-7 fs-sm-6\">{{ item.product.title }}</p>\r\n            </figcaption>\r\n          </figure>\r\n        </td>\r\n        <td class=\"text-center\">\r\n          {{ item.qty }}\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n    <tfoot class=\"p-table__head\">\r\n      <tr class=\"text-light\">\r\n        <td class=\"text-end\">總計</td>\r\n        <td class=\"text-center\">{{ $filters.currency(order.total) }} NTD</td>\r\n      </tr>\r\n    </tfoot>\r\n  </table>\r\n\r\n  <h2 class=\"text-center\">客戶資訊</h2>\r\n  <div class=\"row justify-content-center\">\r\n    <dl class=\"col-md-6\" v-if=\"order.user\">\r\n      <dt>姓名：</dt>\r\n      <dd>{{ order.user.name }}</dd>\r\n      <dt>寄送地址：</dt>\r\n      <dd>{{ order.user.address }}</dd>\r\n      <dt>E-mail信箱：</dt>\r\n      <dd>{{ order.user.email }}</dd>\r\n      <dt>付款方式：</dt>\r\n      <dd>{{ order.user.payment_method }}</dd>\r\n    </dl>\r\n  </div>\r\n\r\n  <div class=\"d-flex justify-content-center mb-4\">\r\n    <button type=\"button\" class=\"btn btn-primary\" @click=\"payment()\">\r\n      <span\r\n        v-if=\"loadingStatus.loadingItem === 3\"\r\n        class=\"material-icons animate-spin\"\r\n      >\r\n        cached\r\n      </span>\r\n      結帳付款\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      loadingStatus: {\r\n        loadingItem: \"\",\r\n      },\r\n      order: {},\r\n    };\r\n  },\r\n  methods: {\r\n    showAlert(res) {\r\n      this.$swal(res.data.message);\r\n    },\r\n    getOrder() {\r\n      const id = this.$route.params.id;\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order/${id}`;\r\n      this.$http\r\n        .get(url)\r\n        .then((res) => {\r\n          this.order = res.data.order;\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    },\r\n    payment() {\r\n      this.loadingStatus.loadingItem = 3;\r\n      const id = this.$route.params.id;\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/pay/${id}`;\r\n      this.$http\r\n        .post(url)\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            this.loadingStatus.loadingItem = \"\";\r\n            this.showAlert(res);\r\n            this.$router.push(`/cartcompleted/${id}`);\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    },\r\n  },\r\n  mounted() {\r\n    console.clear();\r\n    this.getOrder();\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./CartOrder.vue?vue&type=template&id=230bcc97\"\nimport script from \"./CartOrder.vue?vue&type=script&lang=js\"\nexport * from \"./CartOrder.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}