(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dfd9a15a"],{"860c":function(e,t,c){"use strict";c.r(t);c("b0c0");var a=c("7a23"),r={class:"container content"},o=Object(a["createVNode"])("h2",{class:"text-center"},"訂單列表",-1),d={class:"d-flex justify-content-center mt-5"},l={class:"table align-middle mt-4"},n=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",{width:"8%"},"訂單日期"),Object(a["createVNode"])("th",{width:"9%"},"客戶姓名"),Object(a["createVNode"])("th",{width:"10%"},"客戶信箱"),Object(a["createVNode"])("th",{width:"10%"},"客戶電話"),Object(a["createVNode"])("th",{width:"18%"},"客戶地址"),Object(a["createVNode"])("th",{width:"11%"},"訂單總價"),Object(a["createVNode"])("th",{class:"text-end",width:"9%"},"付款狀態"),Object(a["createVNode"])("th",{width:"12%"})])],-1),s={class:"h5"},i={class:"text-end"},b={key:0,class:"text-success"},O={key:1,class:"text-muted"},u={class:"text-end"},p={class:"btn-group"},j={key:0,class:"material-icons animate-spin"},m=Object(a["createTextVNode"])(" 刪除 "),h={colspan:"8",class:"text-end"},V={key:0,class:"material-icons animate-spin"},N=Object(a["createTextVNode"])(" 刪除所有訂單 "),g={class:"d-flex justify-content-center mt-5"};function f(e,t,c,f,y,k){var v=Object(a["resolveComponent"])("Pagination"),x=Object(a["resolveComponent"])("AdminOrderModal"),B=Object(a["resolveComponent"])("DelOrdersModal"),D=Object(a["resolveComponent"])("DelAllOrders");return Object(a["openBlock"])(),Object(a["createBlock"])("div",r,[o,Object(a["createVNode"])("div",d,[Object(a["createVNode"])(v,{page:y.pagination,onGetPage:k.getOrder},null,8,["page","onGetPage"])]),Object(a["createVNode"])("table",l,[n,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(y.orders,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{class:"align-middle",key:t.id},[Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.$filters.date(t.create_at)),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(t.user.name),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(t.user.email),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(t.user.tel),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(t.user.address),1),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",s,Object(a["toDisplayString"])(e.$filters.currency(t.total))+" 元",1)]),Object(a["createVNode"])("td",i,[t.is_paid?(Object(a["openBlock"])(),Object(a["createBlock"])("strong",b,"已付款")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",O,"未付款"))]),Object(a["createVNode"])("td",u,[Object(a["createVNode"])("div",p,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(e){return k.openModal("edit",t)}}," 編輯 ",8,["onClick"]),Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return k.openModal("delete",t)}},[y.loadingStatus.loadingItem===t.id?(Object(a["openBlock"])(),Object(a["createBlock"])("span",j," cached ")):Object(a["createCommentVNode"])("",!0),m],8,["onClick"])])])])})),128))]),Object(a["createVNode"])("tfoot",null,[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("td",h,[Object(a["createVNode"])("button",{class:"btn btn-outline-danger",type:"button",onClick:t[1]||(t[1]=function(t){return k.openModal("deleteall",e.item)}),disabled:y.orders<=1},[1===y.loadingStatus.loadingItem?(Object(a["openBlock"])(),Object(a["createBlock"])("span",V," cached ")):Object(a["createCommentVNode"])("",!0),N],8,["disabled"])])])])]),Object(a["createVNode"])("div",g,[Object(a["createVNode"])(v,{page:y.pagination,onGetPage:k.getOrder},null,8,["page","onGetPage"])]),Object(a["createVNode"])(x,{ref:"adminModal","props-order":y.tempOrder,onUpdateOrder:k.updateOrder},null,8,["props-order","onUpdateOrder"]),Object(a["createVNode"])(B,{ref:"adminDelModal","props-order":y.tempOrder,onDeleteOrders:k.deleteOrder},null,8,["props-order","onDeleteOrders"]),Object(a["createVNode"])(D,{ref:"adminAllOrderDelModal",onDeleteAllOrders:k.deleteAllOrders},null,8,["onDeleteAllOrders"])])}var y=c("5530"),k=(c("99af"),c("1671")),v={class:"modal fade",ref:"modal",tabindex:"-1","aria-labelledby":"customerOrderModalLabel","aria-hidden":"true"},x={class:"modal-dialog modal-xl modal-dialog-centered"},B={class:"modal-content border-0"},D=Object(a["createVNode"])("div",{class:"modal-header bg-primary text-white"},[Object(a["createVNode"])("h3",{id:"customerOrderModalLabel",class:"modal-title"},[Object(a["createVNode"])("span",null,"修改客戶訂單內容")]),Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),M={class:"modal-body"},S=Object(a["createVNode"])("h3",{class:"text-primary"},"選購商品",-1),w={class:"px-3"},C={class:"table align-middle"},$=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",null,"縮圖"),Object(a["createVNode"])("th",null,"品名"),Object(a["createVNode"])("th",null,"類別"),Object(a["createVNode"])("th",null,"數量"),Object(a["createVNode"])("th",{class:"text-end"},"單價"),Object(a["createVNode"])("th",{class:"text-end"},"合計")])],-1),A={class:"text-end"},_={class:"text-end"},L={class:"row"},I={class:"col-md-4"},P=Object(a["createVNode"])("h3",{class:"text-primary"},"用戶資料",-1),T={class:"table"},G={key:0},U=Object(a["createVNode"])("th",{style:{width:"100px"}},"姓名",-1),F=Object(a["createVNode"])("th",null,"Email",-1),q=Object(a["createVNode"])("th",null,"電話",-1),J=Object(a["createVNode"])("th",null,"地址",-1),E={class:"col-md-8"},z=Object(a["createVNode"])("h3",{class:"text-primary"},"訂單細節",-1),H={class:"table"},K=Object(a["createVNode"])("th",{style:{width:"100px"}},"訂單編號",-1),Q=Object(a["createVNode"])("th",null,"下單時間",-1),R=Object(a["createVNode"])("th",null,"付款時間",-1),W={key:0},X={key:1},Y=Object(a["createVNode"])("th",null,"付款狀態",-1),Z={key:0,class:"text-success"},ee={key:1,class:"text-muted"},te=Object(a["createVNode"])("th",null,"總金額",-1),ce={class:"d-flex justify-content-end"},ae={class:"form-check"},re={class:"form-check-label",for:"flexCheckDefault"},oe={key:0},de={key:1},le={class:"modal-footer"},ne=Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function se(e,t,c,r,o,d){return Object(a["openBlock"])(),Object(a["createBlock"])("div",v,[Object(a["createVNode"])("div",x,[Object(a["createVNode"])("div",B,[D,Object(a["createVNode"])("div",M,[S,Object(a["createVNode"])("div",w,[Object(a["createVNode"])("table",C,[$,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(o.tempOrder.products,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:t.id},[Object(a["createVNode"])("th",null,[Object(a["createVNode"])("img",{class:"product-img",src:t.product.imageUrl,alt:t.product.title},null,8,["src","alt"])]),Object(a["createVNode"])("th",null,Object(a["toDisplayString"])(t.product.title),1),Object(a["createVNode"])("th",null,Object(a["toDisplayString"])(t.product.category),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(t.qty)+" / "+Object(a["toDisplayString"])(t.product.unit),1),Object(a["createVNode"])("td",A,Object(a["toDisplayString"])(e.$filters.currency(t.product.price)),1),Object(a["createVNode"])("td",_,Object(a["toDisplayString"])(e.$filters.currency(t.qty*t.product.price)),1)])})),128))])])]),Object(a["createVNode"])("div",L,[Object(a["createVNode"])("div",I,[P,Object(a["createVNode"])("table",T,[o.tempOrder.user?(Object(a["openBlock"])(),Object(a["createBlock"])("tbody",G,[Object(a["createVNode"])("tr",null,[U,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(o.tempOrder.user.name),1)]),Object(a["createVNode"])("tr",null,[F,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(o.tempOrder.user.email),1)]),Object(a["createVNode"])("tr",null,[q,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(o.tempOrder.user.tel),1)]),Object(a["createVNode"])("tr",null,[J,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(o.tempOrder.user.address),1)])])):Object(a["createCommentVNode"])("",!0)])]),Object(a["createVNode"])("div",E,[z,Object(a["createVNode"])("table",H,[Object(a["createVNode"])("tbody",null,[Object(a["createVNode"])("tr",null,[K,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(o.tempOrder.id),1)]),Object(a["createVNode"])("tr",null,[Q,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.$filters.date(o.tempOrder.create_at)),1)]),Object(a["createVNode"])("tr",null,[R,Object(a["createVNode"])("td",null,[o.tempOrder.paid_date?(Object(a["openBlock"])(),Object(a["createBlock"])("span",W,Object(a["toDisplayString"])(e.$filters.date(o.tempOrder.paid_date)),1)):(Object(a["openBlock"])(),Object(a["createBlock"])("span",X,"尚無資訊"))])]),Object(a["createVNode"])("tr",null,[Y,Object(a["createVNode"])("td",null,[o.tempOrder.is_paid?(Object(a["openBlock"])(),Object(a["createBlock"])("strong",Z,"已付款")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",ee,"尚未付款"))])]),Object(a["createVNode"])("tr",null,[te,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.$filters.currency(o.tempOrder.total)),1)])])])]),Object(a["createVNode"])("div",ce,[Object(a["createVNode"])("div",ae,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.tempOrder.is_paid=e}),onClick:t[2]||(t[2]=function(e){return d.paidTime()})},null,512),[[a["vModelCheckbox"],o.tempOrder.is_paid]]),Object(a["createVNode"])("label",re,[o.tempOrder.is_paid?(Object(a["openBlock"])(),Object(a["createBlock"])("span",oe,"已付款")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",de,"未付款"))])])])])]),Object(a["createVNode"])("div",le,[ne,Object(a["createVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[3]||(t[3]=function(t){return e.$emit("update-order",o.tempOrder)})}," 確認 ")])])])],512)}var ie=c("8edb"),be={emits:["update-order"],props:{propsOrder:{type:Object,default:function(){return{}}}},data:function(){return{modal:"",tempOrder:{}}},methods:{paidTime:function(){this.tempOrder.paid_date?this.tempOrder.paid_date="":this.tempOrder.paid_date=Math.floor(Date.now()/1e3)}},watch:{propsOrder:function(){this.tempOrder=this.propsOrder}},mixins:[ie["a"]]};be.render=se;var Oe=be,ue={id:"delOrderModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"delOrderModalLabel","aria-hidden":"true"},pe={class:"modal-dialog modal-dialog-centered"},je={class:"modal-content border-0"},me=Object(a["createVNode"])("div",{class:"modal-header bg-danger text-white"},[Object(a["createVNode"])("h3",{id:"delOrderModalLabel",class:"modal-title"},[Object(a["createVNode"])("span",null,"刪除單筆訂單")]),Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),he={key:0,class:"modal-body"},Ve=Object(a["createTextVNode"])(" 是否刪除 "),Ne={class:"text-danger"},ge=Object(a["createTextVNode"])(" 的訂單(刪除後將無法恢復)。 "),fe={class:"modal-footer"},ye=Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function ke(e,t,c,r,o,d){return Object(a["openBlock"])(),Object(a["createBlock"])("div",ue,[Object(a["createVNode"])("div",pe,[Object(a["createVNode"])("div",je,[me,c.propsOrder.id?(Object(a["openBlock"])(),Object(a["createBlock"])("div",he,[Ve,Object(a["createVNode"])("strong",Ne,Object(a["toDisplayString"])(c.propsOrder.user.name),1),ge])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])("div",fe,[ye,Object(a["createVNode"])("button",{onClick:t[1]||(t[1]=function(t){return e.$emit("delete-orders",c.propsOrder)}),type:"button",class:"btn btn-danger"}," 確認刪除 ")])])])],512)}var ve={props:{propsOrder:{type:Object,default:function(){return{}}}},data:function(){return{modal:""}},mixins:[ie["a"]]};ve.render=ke;var xe=ve,Be={id:"delAllOrderModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"delAllOrderModalLabel","aria-hidden":"true"},De={class:"modal-dialog modal-dialog-centered"},Me={class:"modal-content border-0"},Se=Object(a["createStaticVNode"])('<div class="modal-header bg-danger text-white"><h3 id="delAllOrderModalLabel" class="modal-title"><span>刪除全部訂單</span></h3><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body text-center"> 是否刪除所有訂單<br><strong class="text-danger fs-4">刪除後將無法復原</strong></div>',2),we={class:"modal-footer"},Ce=Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function $e(e,t,c,r,o,d){return Object(a["openBlock"])(),Object(a["createBlock"])("div",Be,[Object(a["createVNode"])("div",De,[Object(a["createVNode"])("div",Me,[Se,Object(a["createVNode"])("div",we,[Ce,Object(a["createVNode"])("button",{onClick:t[1]||(t[1]=function(t){return e.$emit("delete-all-orders")}),type:"button",class:"btn btn-danger"}," 確認刪除 ")])])])],512)}var Ae={data:function(){return{modal:""}},mixins:[ie["a"]]};Ae.render=$e;var _e=Ae,Le={data:function(){return{loadingStatus:{loadingItem:""},orders:{},pagination:{},tempOrder:{}}},components:{Pagination:k["a"],AdminOrderModal:Oe,DelOrdersModal:xe,DelAllOrders:_e},methods:{showAlert:function(e){this.$swal(e.data.message)},getOrder:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pagination.current_page||1,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/admin/orders?page=").concat(t,";");this.$http.get(c).then((function(t){if(t.data.success){var c=t.data,a=c.orders,r=c.pagination;e.orders=a,e.pagination=r}})).catch((function(e){console.log(e)}))},deleteOrder:function(e){var t=this;this.loadingStatus.loadingItem=e.id;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/admin/order/").concat(e.id);this.$http.delete(c).then((function(e){e.data.success&&(t.loadingStatus.loadingItem="",t.$refs.adminDelModal.closeModal(),t.showAlert(e),t.getOrder())})).catch((function(e){console.log(e)}))},deleteAllOrders:function(){var e=this;this.loadingStatus.loadingItem=1;var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/admin/orders/all");this.$http.delete(t).then((function(t){t.data.success&&(e.loadingStatus.loadingItem="",e.$refs.adminAllOrderDelModal.closeModal(),e.showAlert(t),e.getOrder())})).catch((function(e){console.log(e)}))},openModal:function(e,t){switch(e){case"edit":this.getOrder(),this.tempOrder=Object(y["a"])({},t),console.clear(),this.$refs.adminModal.openModal();break;case"delete":this.tempOrder=Object(y["a"])({},t),this.$refs.adminDelModal.openModal();break;case"deleteall":this.$refs.adminAllOrderDelModal.openModal();break;default:break}},updateOrder:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/admin/order/").concat(e.id);this.$http.put(c,{data:e}).then((function(e){e.data.success?(t.$refs.adminModal.closeModal(),t.getOrder()):t.showAlert(e)})).catch((function(e){console.log(e)}))}},mounted:function(){console.clear(),this.getOrder()}};Le.render=f;t["default"]=Le},b0c0:function(e,t,c){var a=c("83ab"),r=c("9bf2").f,o=Function.prototype,d=o.toString,l=/^\s*function ([^ (]*)/,n="name";a&&!(n in o)&&r(o,n,{configurable:!0,get:function(){try{return d.call(this).match(l)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-dfd9a15a.1740b245.js.map